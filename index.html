<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <title>Quét QR</title>
  <script src="https://unpkg.com/html5-qrcode"></script>
</head>
<body>

<h2>Quét QR Code</h2>

<button onclick="startScan()">▶ Bắt đầu quét</button>
<button onclick="stopScan()">⏹ Dừng</button>

<div id="reader" style="width:300px;margin-top:10px"></div>
<p id="result"></p>

<script>
let qr;

function startScan() {
  qr = new Html5Qrcode("reader");
  qr.start(
    { facingMode: "environment" }, // camera sau
    { fps: 10, qrbox: 250 },
    (text) => {
      document.getElementById("result").innerText = "Kết quả: " + text;
      qr.stop();

      // Nếu là link thì mở
      if (text.startsWith("http")) {
        window.open(text, "_blank");
      }
    },
    (err) => {
      // console.log(err); // bỏ qua lỗi đọc
    }
  );
}

function stopScan() {
  if (qr) qr.stop();
}
</script>

</body>
</html>
