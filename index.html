<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>QR Debug</title>
<script src="https://unpkg.com/html5-qrcode"></script>
<style>
body { font-family: Arial; text-align: center; }
#reader { width: 320px; margin: auto; border:1px solid #ccc; }
#log { margin-top: 15px; font-size: 16px; color: blue; word-break: break-all; }
button { padding: 10px 20px; font-size: 16px; }
</style>
</head>

<body>

<h2>QR DEBUG</h2>
<button onclick="startScan()">▶ Bắt đầu quét</button>

<div id="reader"></div>
<div id="log">Chưa quét</div>

<script>
let qr;

function startScan() {
  document.getElementById("log").innerText = "Đang quét...";
  qr = new Html5Qrcode("reader");

  qr.start(
    { facingMode: "environment" },
    {
      fps: 5,
      qrbox: { width: 200, height: 200 }
    },
    (decodedText) => {
      document.getElementById("log").innerText =
        "ĐÃ QUÉT ĐƯỢC:\n" + decodedText;
    },
    (err) => {
      // ghi log lỗi decode (để biết có đang đọc không)
      console.log("decode error", err);
    }
  );
}
</script>

</body>
</html>
